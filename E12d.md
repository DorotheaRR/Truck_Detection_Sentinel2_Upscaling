## Regional primary road / trunk truck traffic

prepared by Henrik Fisser within the [COVID-19 Custom Script Contest](https://www.sentinel-hub.com/contest-covid/) of ESA/EuroDataCube.

This indicator depicts the number of trucks moving on primary roads and trunks in the EU. It is based on data from the [Copernicus Sentinel-2](http://www.esa.int/Applications/Observing_the_Earth/Copernicus/Sentinel-2) satellite.
___________
### Truck traffic as economic indicator
Transportation on roads is by far the [most important mode of cargo logistics](https://ec.europa.eu/eurostat/statistics-explained/index.php/Freight_transport_statistics_-_modal_split) in Europe. The amount of roaming trucks may indicate how the economy of a country is performing. Germany for instance uses truck counts from toll statistics as a [short-term economic indicator](https://www.destatis.de/EN/Service/EXDAT/Datensaetze/truck-toll-mileage.html). Due to the COVID-19-combatting measures the European economy will contract by approximately 9 % in 2020 [according to the European Commission](https://ec.europa.eu/info/business-economy-euro/economic-performance-and-forecasts/economic-forecasts/summer-2020-economic-forecast-deeper-recession-wider-divergences_en). Sentinel-2 data may be used for capturing some of these economic dynamics through the EU-wide truck detection.
The truck indicator shows if there has been an unnormal low or high number of trucks on primary roads and trunks within the respective region of interest. Truck counts are aggregated in a period of approximately three months. Currently available information was derived in April, May and June. 

### Truck detection
This indicator is based on a method that enables to detect trucks on a large scale using Sentinel-2 data. The method exploits an effect related to the [Sentinel-2 Multispectral Instrument (MSI)](https://earth.esa.int/web/sentinel/technical-guides/sentinel-2-msi/msi-instrument) geometry. Sentinel-2 does not see a moving truck once but three times in the red-blue-green spectrum. As the truck is moving during this short time offset, it appears spectrally disassembled. This pattern may be used for detecting moving trucks on roads. Although visual inspection cannot confirm that the objects are trucks, this is implied by the ratio between size of different vehicles and a Sentinel-2 pixel (see validation for details). 
In order to reduce false detections the computation is constrained to road data from [Open Street Maps](https://wiki.openstreetmap.org/wiki/Key:highway) (OSM). The blue dots in Fig. 1 are examples of identified trucks in these subsets.
<p align="center">
<img src="https://github.com/hfisser/Truck_Detection_Sentinel2_Upscaling/blob/master/2020-06-10_madrid.jpeg"width=400/>
</p>

*Fig. 1: Truck detection examples in Madrid*

Detected trucks in 2020 are compared with the median value of the baseline years 2017, 2018 and 2019. In each period the number of detected trucks in an area is divided by the number of observations. The counts of each year are compared with the baseline value, which is the median of the three baseline years. Truck counts higher or lower 5 % than the baseline are denoted as 'High' or 'Low' respectively.

### Overall results
In average, 7 % less trucks than normal were observed on primary roads and trunks in the European Union during the considered period. However, the figures vary across the EU as depicted in Fig. 2. The picture might already suggest some patterns, nevertheless it is worth to look into the details. 
<p align="center">
<img src="https://github.com/hfisser/Truck_Detection_Sentinel2_Upscaling/blob/master/primary_map.png"width=600/>
</p>

*Fig. 2: Trucks on primary roads / trunks - indicator results in EU regions*

Lockdown measures have been diverse across the EU. Depending on area-specific data availability and the lockdown periods both effects directly induced by the measures and potential catch-up effects might be captured. 

### Validation
The Sentinel-2 truck detection method has been validated with [German traffic count stations](https://www.bast.de/BASt_2017/DE/Verkehrstechnik/Fachthemen/v2-verkehrszaehlung/zaehl_node.html) on the two motorways A3 and A61. This validation implies that the Sentinel-2 method detects in average 78 % of the trucks counted at the four used station (Fig. 3). Since the station data is hourly, its mean per 15 minutes was calculated for the date and time of the respective Sentinel-2 acquisition. The validation also suggests that detected objects are mostly trucks and not cars as the number of counted cars at the count stations is approximately three to four times higher than the number of trucks. 
<p align="center">
<img src="https://github.com/hfisser/Truck_Detection_Sentinel2_Upscaling/blob/master/validation_percentages.png"width=400/>
</p>

*Fig. 3: Trucks detected by Sentinel-2 vs. station counts [%]*

It is important to note that the validation is still limited to Germany and only considers motorways. Moreover, on large-scale processing, an area-specific uncertainty is introduced by haze that may lead to false detections. This uncertainty tends to be higher in smaller areas of interest with generally low truck traffic.


